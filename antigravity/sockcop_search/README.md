<p align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="./public/assets/hero_banner.svg">
    <source media="(prefers-color-scheme: light)" srcset="./public/assets/hero_banner.svg">
    <img alt="Sockcop Search Neo-Monolith Hero" src="./public/assets/hero_banner.svg" width="100%">
  </picture>
</p>

# üåê Sockcop Search: The Enterprise Matrix

<div align="center">

[![License](https://img.shields.io/badge/License-Apache_2.0-0F172A?style=for-the-badge&logoColor=38BDF8&labelColor=1E293B)](https://opensource.org/licenses/Apache-2.0)
[![Next.js](https://img.shields.io/badge/Vite-6.0-0F172A?style=for-the-badge&logo=vite&logoColor=38BDF8&labelColor=1E293B)](https://vitejs.dev/)
[![React](https://img.shields.io/badge/React-19.0-0F172A?style=for-the-badge&logo=react&logoColor=3B82F6&labelColor=1E293B)](https://react.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-CSS-0F172A?style=for-the-badge&logo=tailwind-css&logoColor=06B6D4&labelColor=1E293B)](https://tailwindcss.com/)
[![Google Cloud](https://img.shields.io/badge/Vertex_AI-Search-0F172A?style=for-the-badge&logo=googlecloud&logoColor=F59E0B&labelColor=1E293B)](https://cloud.google.com/enterprise-search)
[![Microsoft Entra](https://img.shields.io/badge/Entra_ID-Federation-0F172A?style=for-the-badge&logo=microsoft&logoColor=8B5CF6&labelColor=1E293B)](https://entra.microsoft.com/)

</div>

> **Sockcop Search** transcends basic retrieval. It is a high-fidelity, brutalist neo-monolith built on **React 19** and **Vite**, acting as a secure gateway to your enterprise intelligence. It federates Microsoft Entra ID authentication signals directly into the heart of Google Cloud's **Vertex AI Search (Gemini Enterprise)** engine without a traditional backend.

---

### ‚ú® The 2076 Architecture

Sockcop Search utilizes a serverless cross-cloud trust mesh. Authentication originates in Azure. Authorization is verified in Google Cloud. Data is scraped from SharePoint. The answer is synthesized by Gemini. All orchestrated locally in real-time.

<p align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="./public/assets/arch_diagram.svg">
    <source media="(prefers-color-scheme: light)" srcset="./public/assets/arch_diagram.svg">
    <img alt="Next Gen Architecture Pathway" src="./public/assets/arch_diagram.svg" width="100%">
  </picture>
</p>

---
## üöÄ Step-by-Step Configuration Guide

To securely integrate your application as a federated search connector using Gemini Enterprise capabilities, you must follow this specific initialization chronological order. **Crucially, no credentials must be leaked or stored in your frontend.**

<br/>

<details open>
<summary><b>[PHASE 1] Initial Azure AD (Entra ID) App Setup</b></summary>
<br/>

> **Objective:** Create the primary Identity Provider (IdP) for the frontend user session.

| **Step** | **Action** | **Validation Image** |
| :--- | :--- | :--- |
| **1.** | Navigate to **Microsoft Entra admin center** > **App registrations**. | |
| **2.** | Create a new application (`deloitte-entraid`). | |
| **3.** | Go to **Authentication**. Add a **SPA** platform. Set Redirect URIs (`http://localhost:5173`). Enable Access & ID tokens. | <img src="./public/screenshots/deloitte-entraid_Authentication.png" width="400" /> |
| **4.** | Go to **API permissions**. Grant `User.Read`. Ensure Admin Consent is granted. | <img src="./public/screenshots/deloitte-entraid_API_permissions.png" width="400" /> |

<div align="right">
<code><b>EXTRACTED:</b> Client ID</code> | <code>Tenant ID</code> | <code>Issuer URI</code>
</div>
</details>

<br/>

<details open>
<summary><b>[PHASE 2] Google Cloud Workforce Identity Federation (WIF)</b></summary>
<br/>

> **Objective:** Command Google Cloud to trust the authentication tokens generated by Entra ID.

| **Step** | **Action** | **Validation Image** |
| :--- | :--- | :--- |
| **1.** | Navigate to **GCP Console** > **IAM & Admin** > **Workforce Identity Federation**. | |
| **2.** | Click **Create pool** (e.g., `entra-id-oidc-pool-d`). | <img src="./public/screenshots/WIF_pool_overview.png" width="400" /> |
| **3.** | Inside the pool, click **Add Provider** (OIDC). | |
| **4.** | Set **Issuer URI** and **Client ID** from Phase 1. Map `google.subject` to `assertion.sub`. | <img src="./public/screenshots/WIF_provider_config.png" width="400" /> |

<div align="right">
<code><b>EXTRACTED:</b> WIF Pool ID</code> | <code>WIF Provider ID</code>
</div>
</details>

<br/>

<details open>
<summary><b>[PHASE 3] Google Cloud IAM WIF Binding</b></summary>
<br/>

> **Objective:** Bind Vertex AI Search API permissions directly to the WIF-authenticated identities.

| **Step** | **Action** | **Validation Image** |
| :--- | :--- | :--- |
| **1.** | Navigate to **GCP Console** > **IAM & Admin** > **IAM**. | |
| **2.** | Click **Grant Access**. | |
| **3.** | Enter the `principalSet://` identifier representing your WIF pool. | |
| **4.** | Assign `Discovery Engine Viewer` and `Vertex AI User` roles. | <img src="./public/screenshots/gcp_iam_wif_bindings.png" width="400" /> |

</details>

<br/>

<details open>
<summary><b>[PHASE 4] SharePoint Connector App (Background Sync)</b></summary>
<br/>

> **Objective:** Create a secondary "Service" App in Entra ID specifically designed for automated backend connector synchronization by Google Cloud.

| **Step** | **Action** | **Validation Image** |
| :--- | :--- | :--- |
| **1.** | Return to **Entra App registrations**. Create `deloitte-sharepoint-datastore`. | |
| **2.** | Go to **Authentication**. Configure Web callback (if needed by your specific flow). | <img src="./public/screenshots/deloitte-sharepoint-datastore_Authentication.png" width="400" /> |
| **3.** | Go to **API permissions**. Add **Application permissions** for Microsoft Graph (`Sites.Read.All`, `Sites.Search.All`). **Grant Admin Consent**. | <img src="./public/screenshots/deloitte-sharepoint-datastore_API_permissions.png" width="400" /> |
| **4.** | Go to **Certificates & secrets** and generate a new **Client Secret**. | |

<div align="right">
<code><b>EXTRACTED:</b> Client Secret</code>
</div>
</details>

<br/>

<details open>
<summary><b>[PHASE 5] Gemini Enterprise Agent Builder Configuration</b></summary>
<br/>

> **Objective:** Connect the Entra ID Service App pipeline into the Google Cloud search indexer.

| **Step** | **Action** | **Validation Image** |
| :--- | :--- | :--- |
| **1.** | Navigate to **GCP Console** > **Agent Builder** > **Data Stores**. | |
| **2.** | Click **Create Data Store** > **SharePoint**. | |
| **3.** | Provide the **Client ID** (from Phase 4), **Tenant ID**, and **Client Secret**. | |
| **4.** | Define the SharePoint Site URLs to index and initiate the sync. | <img src="./public/screenshots/gcp_agent_builder_datastores.png" width="400" /> |

<div align="right">
<code><b>EXTRACTED:</b> Datastore ID</code> | <code>Engine ID</code>
</div>
</details>

<br/>

<details open>
<summary><b>[PHASE 6] Frontend Integration (React App)</b></summary>
<br/>

> **Objective:** Inject all accumulated identifiers into the React application.

Update your `src/api/config.js` file with the mapping identifiers recovered in the previous phases.

```javascript
export const CONFIG = {
    // GCP Configuration
    PROJECT_NUMBER: "YOUR_PROJECT_NUMBER",
    LOCATION: "global",
    
    // WIF Configuration (Phase 2)
    WIF_POOL: "<YOUR_POOL_ID>",
    WIF_PROVIDER: "<YOUR_PROVIDER_ID>",
    
    // Vertex AI (Phase 5)
    DATA_STORE_ID: "<YOUR_DATA_STORE_ID>",
    ENGINE_ID: "deloitte-demo",
    
    // Entra ID (Phase 1)
    TENANT_ID: "<YOUR_TENANT_ID>",
    MS_APP_ID: "<YOUR_ENTRA_CLIENT_ID>", 
    ISSUER: "https://login.microsoftonline.com/<YOUR_TENANT_ID>/v2.0"
};
```
</details>

---

## üõ†Ô∏è Development Setup
